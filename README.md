# 基于Django的农民创业信息平台搭建
## 绪论

这是一个两年前学习Django的学生项目，首先非常推荐通过这个视频学习Django的相关知识：https://www.bilibili.com/video/BV1NL41157ph/?spm_id_from=333.999.0.0&vd_source=1d2bdc0796c88b1def16f703acaf95ee

--------------------------------------------------------（以下是两年前写的报告）------------------------------------------------------------------

这个项目是一个有关扶贫的平台：用户作为扶贫小组的成员，可以根据调查员收集的数据，参考算法预测的创业概率后，去有针对性的进行实地调查，然后撰写报告提交给上级，以便获取上级的反馈。用户之间可以互相查看对方的报告、编辑自己的报告以及查看后台的调查数据；超级用户，即管理员，可以拥有所有权限：包括编辑数据增删改查、管理用户数据，甚至管理用户撰写的报告。

## 提要
models.py
-	本项目暂时包含3个数据库，分别存储调查数据、部门数据、部门职员数据。部门职员也是用户，可以用他们的邮箱当作账号登陆系统。数据量大，涉及的表多，也涉及联表查询。
-	在utils.encrypt中定义了加密方法，此处用户的密码采用MD5加密，而非直接明文保存到数据库中。
假设数据库中已经保存了一个部门“数据部门”，有一名用户来自数据部门，是超级用户。账号密码为admin@163.com，123456。

views/account.py
-	登录：可以使用账号admin@163.com，密码123456登录，前提是数据库中要有这个用户。登录界面可正常报错，如必填项报错、密码错误报错。此时是以管理员，即超级用户的身份登录的。本项目使用了中间件来阻止企图绕过登录的行为。
-	注销：清除cookie和session
-	管理个人资料：可更改个人信息，保存后同步到数据库。使用ModelForm方法接受用户数据。检查用户更改的合法性。若要更改密码，实现了“确认密码”功能，即用户的新密码必须和确认密码输入的一致。

![image](https://github.com/user-attachments/assets/0994c4d6-8ef0-4a12-a149-809efbde1a5b)

views/index.py
-	首页：主页面几乎所有要素都与后台数据库连接。主页使用了百度的Echats、百度地图的API。页面风格是Bootstrap的风格。
如果用户不是超级用户（使用session判断），在主页面的导航上将看不到“后台管理”的入口。首页有分流功能。

views/chart.py
-	首页可视化：控制首页的四个图表，使用了Ajax方法，配合index.js接收后端传来的数据，让图表显示。

![image](https://github.com/user-attachments/assets/d55559d7-9af9-4f28-8888-96079fb1e452)


views/data.py
-	后台管理-创业数据管理：展示所有符合筛选条件的数据条目。\
1、可搜索：支持多维搜索，搜索方式多样，包括模糊搜索、下拉框、日历。其中复选框挑选数据库没做，但可拓展，后台已经写好了筛选判断。\
2、新增数据：在views/message.py中定义方法，支持使用excel表格导入调查数据，也可以手动键入数据，使用ModelForm方法接受用户数据。检查用户更改的合法性。\
3、批量删除：未做，计划是点击后出现复选框，让用户进行批量勾选并删除。\
4、可导出数据：支持筛选后的数据导出，下载为excel表格。页面上展示什么数据，下载后的表格里就有什么数据。\
5、创业概率预测：调用utils.Logistic_Regression.py，里面保存了逻辑回归算法的类，用于根据调查结果进行机器学习，然后给定新的调查数据，判断被调查者的创业概率后显示出来。\
6、详细信息：未做，计划是点击后打开弹窗，展示没有展示在主表格中的数据。\
7、编辑条目：管理员可在原来数据的基础上直接更改数据。使用ModelForm方法接受用户数据。检查用户更改的合法性。\
8、删除条目：删除指定条目的数据\
9、应用分页器：分页器充分考虑了用户的日常使用习惯，比如应用删除数据后页码不会跳回第一页、翻页不会刷新筛选条件、自定义跳转页码且防止页码超限、自定义每页显示个数等等。这次迭代彻底解决了上个版本中的bug，现在的分页器基本没有使用逻辑问题。

![image](https://github.com/user-attachments/assets/49b2724e-0335-49b6-abd2-9e7c867035ad)

views/depart.py
-	后台管理-职员资料管理：展示给定部门的职员资料条目。特点和“创业数据管理”差不多。但也有一些不同：\
1、考虑到了联表查询：比如新增职员不能新增到不存在的部门中，必须先创建部门。\
2、此处的导出表格功能未做。\
3、重置密码：点击后，该用户的密码会被重置为123456，并以加密形式保存在数据库中。\
只有出现在这里的职员才可以使用他们的邮箱作为账号登录本系统。作为普通用户，他们无法看到这些管理的部分。

## 总结

总而言之，本项目基于研究论文提出的需求；有参考一些使用中的信息系统；项目的数据量大；充分发挥了django的优势，比如modelform方法，ajax方法；项目充分考虑了真实用户日常使用的习惯，比如引入分页器、搜索框、excel表格的导入和导出功能；项目注重美观，大量使用了Bootstrap的组件……

本项目也有缺点，比如刻意减少了JavaScript的使用，因为对js的了解不多，使用js的地方只有首页的四个可视化图表，可以在后续多添加一些内容，比如在用户准备删除数据时进行询问，弹出确认框。另外，未完成的内容较多，但django的一大特点是能够在很短的时间内开发出一个小系统，因为可复用的部分非常多。首页的排布有点问题，比例不太协调。






